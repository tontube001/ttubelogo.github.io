<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mini Exchange</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body{
            background-color: whitesmoke;
            padding-top: 10vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }


        #menu{
        
        position: fixed;
        bottom: 0;
        width: 100%;
        height: 9vh;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-evenly;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 3vmin;
        font-weight: 600;
        border: none;
        border-top: solid 1px gray;
        background-color: whitesmoke;
    }
    .menu-btn{
        background-color: white;
        border: none;
        border-radius: 10px;
        height: 5vh;
        width: 18vw;
        font-family: Arial, Helvetica, sans-serif;

    }
    .menu-btn.active{
        background-color: rgb(0, 153, 255);
        border: none;
        border-radius: 10px;
        height: 5vh;
        width: 18vw;
        font-family: Arial, Helvetica, sans-serif;
        color: white;
    }


    




        #trade-view{
            display: contents;
        }
        #pairs-view{
            display: none;
        }
        #chart-view{
            display: none;
            
        }
        #acc-view{
            display: none;
        }
        #set-view{
            display: none;
        }
        .tradingview{
           position: absolute;
           width: 100%;
           top: 0;
           bottom: 9vh;
        }
        .page-head{
            position: fixed;
            top: 0;
            font-family: Avenir, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            color: rgb(17, 30, 43);
            font-size: 8vmin;
            height: 9vh;
            width: 100%;
            background-color: whitesmoke;
            display: flex;
            align-items: center;
            padding-left: 15px;
            border: none;
            border-bottom: solid 1px gray;
        }
        .pair-watch{
            position: relative;
            background-color: white;
            margin-top: 10px;
            width: 95%;
            border-radius: 10px;
            height: 7vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            
        }
        .p-logo{
            background-color: skyblue;
            height: 8vmin;
            width: 8vmin;
            border-radius: 50%;
            margin-left: 2vmin;
        }
        .p-name{
            margin-left: 2vmin;
            font-family: Avenir, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 700;
            color: gray;
            font-size: 3.5vmin;
        }
        .p-price{
            position: absolute;
            right: 4vmin;
            font-family: Avenir, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-size: 4vmin;
            font-weight: 500;
        }
        #trade-panel{
            background-color: white;
            height: 40vh;
            width: 95%;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
        }
        #p-panel{
            border: solid 1px lightgray;
            

        }
        #t-sett{
            width: 100%;
            height: 5vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-evenly;
        }
        .def-sett{
            border: solid 1px lightgray;
            height: 4vh;
            width: 28.3vw;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 3vmin;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
        }
        #man-sett{
            width: 100%;
            height: 5vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
        }
        #margin{
            
            margin-left: 2vmin;
            width: 65vw;
            height: 4vh;
            border: solid 1px lightgray;
            border-radius: 5px;
            padding-left: 2vmin;
        }
        /* Chrome, Safari, Edge, Opera */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type="number"] {
            -moz-appearance: textfield;
        }

        /* Custom spinner controls */
        input[type="number"]::-webkit-inner-spin-button {
            background: blue;
            height: 20px;
            width: 20px;
        }

        input[type="number"]::-webkit-outer-spin-button {
            background: red;
            height: 20px;
            width: 20px;
        }
        #t-pair{
            margin-right: 2vmin;
            height: 4vh;
            width: 20vw;
            border: solid 1px lightgray;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 3vmin;
        }
        #info{
            width: 100%;
            height: 4vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            
        }
        #cost{
            width: 20vw;
            height: 3vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-evenly;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 2.2vmin;
            margin-left: 1vmin;
        }
        #balance{
            width: 25vw;
            height: 3vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-evenly;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 2.2vmin;
            margin-right: 1vmin;
        }
        #operation{
            width: 94%;
            height: 6vh;
            margin-top: 2vmin;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            border: solid 1px lightgray;
            border-radius: 7px;
        }
        .trade-btn{
            background-color: white;
            height: 6vh;
            width: 45vw;
            border: none;
            border-radius: 7px;
        }
        #buy{
            background-color: rgb(0, 153, 255);
            color: white;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 4vmin;
            
        }
        #sell{
            font-family: Arial, Helvetica, sans-serif;
            font-size: 4vmin;
        }
        #br-line{
            height: 2px;
            width: 100%;
            background-color: lightgray;
            margin-top: 5vmin;
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>


    <div class="content" id="trade-view" >
        <h1 class="page-head">Trade</h1>
        <div id="trade-panel">

            <div class="pair-watch" id="p-panel">
                <img src="./img/bitcoinlogo.png" alt="BTClogo" class="p-logo">
                <p class="p-name">BTC/USDT</p>
                <p class="p-price" id="btc-price0">...</p>
            </div>

            <div id="t-sett">
                <p class="def-sett">175 X</p>
                <p class="def-sett">Market</p>
                <p class="def-sett">Cross</p>
            </div>

            <div id="man-sett">
                <input type="number" name="margin" id="margin" placeholder="Amount">
                <p id="t-pair">BTC</p>
            </div>

            <div id="info">
                <div id="cost">
                    <p class="info-name">Cost</p>
                    <p class="info-value">0.00 USDT</p>
                </div>
                <div id="balance">
                    <p class="info-name">Balance</p>
                    <p class="info-value">0.00 USDT</p>
                </div>
            </div>

            <div id="operation">
                <input type="button" value="Buy" id="buy" class="trade-btn">
                <input type="button" value="Sell" id="sell" class="trade-btn">
            </div>

        </div>
        

    </div>



    <div class="content" id="pairs-view" >
        <h1 class="page-head">Pairs</h1>

        <div class="pair-watch">
            <img src="./img/bitcoinlogo.png" alt="BTClogo" class="p-logo">
            <p class="p-name">BTC/USDT</p>
            <p class="p-price" id="btc-price">...</p>
        </div>
        <div class="pair-watch">
            <img src="./img/ethlogo.png" alt="ETHlogo" class="p-logo">
            <p class="p-name">ETH/USDT</p>
            <p class="p-price" id="eth-price">...</p>
        </div>
        <div class="pair-watch">
            <img src="./img/tonlogo.jpg" alt="ETHlogo" class="p-logo">
            <p class="p-name">TON/USDT</p>
            <p class="p-price" id="ton-price">...</p>
        </div>
        

        



        
    </div>



    <div id="chart-view" class="content">

        <!-- TradingView Widget BEGIN -->
        <div class="tradingview" >
        <div class="tradingview-widget-container__widget" ></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
        {
        "autosize": true,
        "symbol": "BINANCE:BTCUSDT",
        "interval": "240",
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "en",
        "allow_symbol_change": true,
        "calendar": false,
        "support_host": "https://www.tradingview.com"
        }
        </script>
        </div>
        <!-- TradingView Widget END -->
        
        

    </div>



    <div id="acc-view" class="content">
        <h1 class="page-head">Account</h1>
        

    </div>


    <div id="menu">
        <button  class="menu-btn" data-target="pairs-view">Pairs</button>
        <button  class="menu-btn" data-target="chart-view">Chart</button>
        <button  class="menu-btn active" data-target="trade-view">Trade</button>
        <button  class="menu-btn" data-target="acc-view">Account</button>
    </div>
    
<script>



        document.querySelectorAll('.menu-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                
                document.querySelectorAll('.content').forEach(content => content.style.display = 'none');
                //Show the corresponding content div
                const target = button.getAttribute('data-target');
                document.getElementById(target).style.display = 'contents';
                
                
                
            });
        });

        let btc = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@trade');
        let btcLast = null;

        btc.onmessage = (event) => {
            let stockObject = JSON.parse(event.data);
            let stockPriceElement = document.getElementById('btc-price');
            let stockPriceElement0 = document.getElementById('btc-price0');
            let price = parseFloat(stockObject.p).toFixed(2);
            stockPriceElement.textContent = price;
            stockPriceElement0.textContent = price;
            stockPriceElement.style.color = !btcLast || btcLast === price ? 'gray' : price > btcLast ? 'rgb(0, 174, 255)' : 'rgb(255, 38, 0)'; 
            stockPriceElement0.style.color = !btcLast || btcLast === price ? 'gray' : price > btcLast ? 'rgb(0, 174, 255)' : 'rgb(255, 38, 0)'; 
            btcLast = price;
        }

    function eth(){
        let ws = new WebSocket('wss://stream.binance.com:9443/ws/ethusdt@trade');
        let ethLast = null;

        ws.onmessage = (event) => {
            let stockObject = JSON.parse(event.data);
            let stockPriceElement = document.getElementById('eth-price');
            let price = parseFloat(stockObject.p).toFixed(2);
            stockPriceElement.textContent = price;
            stockPriceElement.style.color = !btcLast || btcLast === price ? 'gray' : price > btcLast ? 'rgb(0, 174, 255)' : 'rgb(255, 38, 0)'; 
            btcLast = price;
        }
    };

    eth();
    //ton();
</script>
</body>
</html>




